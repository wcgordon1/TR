---
import BaseLayout from "./BaseLayout.astro";
const { frontmatter } = Astro.props;

// Create JSON-LD schema
const jobSchema = {
  "@context": "https://schema.org/",
  "@type": "JobPosting",
  "title": frontmatter.position,
  "description": frontmatter.description,
  "identifier": {
    "@type": "PropertyValue",
    ...frontmatter.identifier
  },
  "datePosted": frontmatter.datePosted,
  "validThrough": frontmatter.validThrough,
  "employmentType": frontmatter.employmentType,
  "hiringOrganization": {
    "@type": "Organization",
    ...frontmatter.hiringOrganization
  },
  "jobLocation": {
    "@type": "Place",
    "address": {
      "@type": "PostalAddress",
      ...frontmatter.jobLocation
    }
  },
  "baseSalary": {
    "@type": "MonetaryAmount",
    "currency": frontmatter.baseSalary.currency,
    "value": {
      "@type": "QuantitativeValue",
      "minValue": frontmatter.baseSalary.minValue,
      "maxValue": frontmatter.baseSalary.maxValue,
      "value": frontmatter.baseSalary.value,
      "unitText": frontmatter.baseSalary.unitText
    }
  },
  "experienceRequirements": frontmatter.experienceRequirements,
  "occupationalCategory": frontmatter.occupationalCategory
};
---

<BaseLayout>
  <script type="application/ld+json" set:html={JSON.stringify(jobSchema)} />
  
  <section>
    <div
      class="mx-auto max-w-7xl lg:px-16 md:px-12 px-8 xl:px-24 lg:flex py-24">
      <div class="lg:w-1/2 lg:pl-12 lg:ml-auto">
        <div class="lg:sticker lg:sticky pb-16 pt-8 top-0">
          <div class="lg:pl-36 md:pl-12">
            <nav
              aria-label="Sidebar"
              class="bg-slate-50 rounded-lg divide-y space-y-3 p-4 lg:p-8">
              <div>
                <h3 class="text-lg text-purple-900">Office location</h3>
                <div class="flex items-center gap-2 mt-4">
                  <p class="text-slate-500">
                    {frontmatter.location}
                  </p>
                </div>
              </div>
              <div>
                <h3 class="mt-3 text-lg text-purple-900">Team</h3>
                <p class="text-slate-500 mt-4">{frontmatter.team}</p>
              </div>
              <div class="pt-4 flex">
                <a
                  class="text-white items-center font-medium gap-3 inline-flex focus-visible:outline-2 focus-visible:outline-offset-2 focus:outline-none justify-center px-6 lg:px-8 ring-2 ring-transparent focus:ring-offset-2 focus:ring-blue-500 duration-200 py-3.5 rounded-full active:bg-blue-800 active:text-white bg-blue-500 hover:bg-blue-600 w-full"
                  title="link to your page"
                  aria-label="your label"
                  href="/jobs/job-application">
                  Apply now
                </a>
              </div>
            </nav>
          </div>
        </div>
      </div>
      <div class="lg:w-1/2 lg:order-first">
        <div class="flex-shrink-0">
          <p
            class="text-purple-900 font-semibold mt-6 text-3xl tracking-tight lg:text-balance">
            {frontmatter.position}
          </p>
          <div class="prose-styles">
            <slot />
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="bg-white">
    <div class="lg:p-8">
      <div class="bg-purple-900 max-w-7xl mx-auto lg:rounded-3xl">
        <div class="mx-auto max-w-7xl lg:px-16 md:px-12 px-8 xl:px-24 py-24">
          <div>
            <h2
              class="text-white font-semibold tracking-tighter lg:text-5xl text-3xl">
              We look forward to hearing from you
            </h2>
            <p class="text-slate-300 mt-5 lg:text-balance">
              At Spazio Bianco, we're looking for people with passion, grit, and
              integrity. You're encouraged to apply even if your experience
              doesn't precisely match the job description. Your skills and
              passion will stand out—and set you apart—especially if your career
              has taken some extraordinary twists and turns. At Spazio Bianco,
              we welcome diverse perspectives and people who think rigorously
              and aren't afraid to challenge assumptions. Join us.
            </p>
            <div class="mt-10 flex">
              <a
                class="text-white items-center font-medium gap-3 inline-flex focus-visible:outline-2 focus-visible:outline-offset-2 focus:outline-none justify-center px-6 lg:px-8 ring-2 ring-transparent focus:ring-offset-2 focus:ring-blue-500 duration-200 py-3.5 rounded-full active:bg-blue-800 active:text-white bg-blue-500 hover:bg-blue-600 w-auto"
                href="/job-application">
                Apply now
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
